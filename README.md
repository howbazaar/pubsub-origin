
# pubsub
    import "github.com/juju/pubsub"

Package pubsub provides publish and subscribe functionality.





## Variables
``` go
var JSONMarshaller = &jsonMarshaller{}
```
JSONMarshaller simply wraps the json.Marshal and json.Unmarshal calls for the
Marshaller interface.



## type Completer
``` go
type Completer interface {
    // Complete returns a channel that is closed when all the subscribers
    // have been notified of the event.
    Complete() <-chan struct{}
}
```
Completer provides a way for the caller of publish to know when all of the
subscribers have finished being notified.











## type Hub
``` go
type Hub interface {

    // Publish will notifiy all the subscribers that are interested by calling
    // their handler function.
    Publish(topic string, data interface{}) (Completer, error)

    // Subscribe takes a topic regular expression, and a handler function.
    // If the topicRegex is not a valid regular expression, and error is returned.
    Subscribe(topicRegex string, handler interface{}) (Unsubscriber, error)
}
```
Hub represents an in-process delivery mechanism. The hub maintains a
list of topic subscribers.









### func NewSimpleHub
``` go
func NewSimpleHub() Hub
```
NewSimpleHub returns a new Hub instance.

A simple hub does not touch the data that is passed through to Publish.
This data is passed through to each Subscriber. Note that all subscribers
are notified in parallel, and that no modification should be done to the
data or data races will occur.


### func NewStructuredHub
``` go
func NewStructuredHub(config *StructuredHubConfig) Hub
```
NewStructuredHub returns a new Hub instance.




## type Marshaller
``` go
type Marshaller interface {
    Marshal(interface{}) ([]byte, error)
    Unmarshal([]byte, interface{}) error
}
```
Marshaller defines the Marshal and Unmarshal methods used to serialize and
deserialize the structures used in Publish and Subscription handlers of the
structured hub.











## type StructuredHubConfig
``` go
type StructuredHubConfig struct {
    // Marshaller defines how the structured hub will convert from structures to
    // a map[string]interface{} and back. If this is not specified, the
    // `JSONMarshaller` is used.
    Marshaller Marshaller

    // Annotations are added to each message that is published if and only if
    // the values are not already set.
    Annotations map[string]interface{}
}
```
StructuredHubConfig is the argument struct for NewStructuredHub.











## type Unsubscriber
``` go
type Unsubscriber interface {
    Unsubscribe()
}
```
Unsubscriber provides a simple way to Unsubscribe.

















- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)